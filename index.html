<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Papaya - –°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∏ –æ—Ä–µ—Ö–∏</title>
    <style>
        /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –≤–∞—à–∏ –∏—Å—Ö–æ–¥–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f0f9f0 0%, #e6f4e6 100%);
            min-height: 100vh;
            padding: 20px 10px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header {
            background: white; border-radius: 12px; padding: 25px 15px;
            margin-bottom: 30px; box-shadow: 0 4px 6px rgba(72, 187, 120, 0.1);
            text-align: center; border: 1px solid #e6f7ec;
        }
        h1 { color: #2e7d32; font-size: 2em; margin-bottom: 10px; font-weight: 300; }
        .subtitle { color: #388e3c; margin-bottom: 20px; font-size: 1em; }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —è–∑—ã–∫–æ–≤ */
        .lang-switcher {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .lang-btn {
            background: white;
            border: 2px solid #66bb6a;
            color: #2e7d32;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        .lang-btn.active {
            background: #66bb6a;
            color: white;
        }

        /* –í–∞—à–∏ —Å—Ç–∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .filter-container {
            background: white; border-radius: 12px; padding: 20px;
            margin-bottom: 30px; display: flex; flex-wrap: wrap;
            gap: 10px; justify-content: center;
        }
        .filter-btn {
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
            color: white; border: none; padding: 10px 20px;
            border-radius: 8px; cursor: pointer; transition: all 0.3s ease;
        }
        .filter-btn.active { background: linear-gradient(135deg, #2e7d32 0%, #1b5e20 100%); }
        
        .category-section { margin-bottom: 40px; }
        .category-title { color: #2e7d32; font-size: 1.6em; margin-bottom: 20px; border-bottom: 3px solid #c8e6c9; }
        
        .products-grid {
            display: grid; gap: 20px;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }
        .product-card {
            background: white; border-radius: 12px; border: 1px solid #e6f7ec;
            display: flex; flex-direction: column; height: 100%; overflow: hidden;
        }
        .product-image-container { height: 180px; background: #f5f5f5; display: flex; align-items: center; justify-content: center; }
        .product-image { width: 100%; height: 100%; object-fit: cover; }
        .product-content { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }
        .product-name { font-weight: 600; color: #2e7d32; text-align: center; min-height: 2.6em; }
        .product-details { font-size: 0.85em; color: #666; text-align: center; margin: 10px 0; }
        .price { font-size: 1.2em; color: #388e3c; font-weight: bold; text-align: center; margin-top: auto; }
        .order-section { background: #4caf50; color: white; padding: 30px; border-radius: 16px; text-align: center; margin-top: 40px; }
        .btn { background: white; color: #2e7d32; padding: 12px 25px; border-radius: 10px; text-decoration: none; font-weight: bold; display: inline-block; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="lang-switcher">
            <button class="lang-btn active" id="btn-ru" onclick="changeLanguage('ru')">RU</button>
            <button class="lang-btn" id="btn-kz" onclick="changeLanguage('kz')">KZ</button>
        </div>

        <div class="header">
            <h1>üå∞ Papaya üå∞</h1>
            <p class="subtitle" id="site-subtitle">–°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∏ –æ—Ä–µ—Ö–∏ –æ–ø—Ç–æ–º –∏–∑ –¢—É—Ä—Ü–∏–∏ –∏ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞</p>
            <div class="contact-info">
                <strong>‚òéÔ∏è:</strong> 8 705 764 52 13 | <strong>üìç:</strong> –£—Å—Ç—å-–ö–∞–º–µ–Ω–æ–≥–æ—Ä—Å–∫
            </div>
        </div>

        <div class="filter-container" id="filter-box">
            </div>

        <div id="productsContainer">
            <div class="loading">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ / –ñ“Ø–∫—Ç–µ—É...</div>
        </div>

        <div class="order-section">
            <h2 id="order-title">üì¶ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</h2>
            <p id="order-text">–ì–æ—Ç–æ–≤—ã –∑–∞–∫–∞–∑–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∏ –æ—Ä–µ—Ö–∏ –æ–ø—Ç–æ–º?</p>
            <a href="https://wa.me/77057645213" target="_blank" class="btn" id="wa-btn">–ó–∞–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ WhatsApp</a>
        </div>
    </div>

    <script>
        const GOOGLE_SHEETS_URL = 'https://script.google.com/macros/s/AKfycbxkRPhlW6ULYGk3W2k1PnkgbhWWZwnsaT0ogeD-2bDSV2nvPTY3sOkEOoZgM_b7NV-E/exec';
        
        let allProducts = [];
        let currentLang = 'ru';
        let currentCategory = 'all';

        const i18n = {
            ru: {
                subtitle: "–°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∏ –æ—Ä–µ—Ö–∏ –æ–ø—Ç–æ–º –∏–∑ –¢—É—Ä—Ü–∏–∏ –∏ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞",
                orderTitle: "üì¶ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑",
                orderText: "–ì–æ—Ç–æ–≤—ã –∑–∞–∫–∞–∑–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∏ –æ—Ä–µ—Ö–∏ –æ–ø—Ç–æ–º?",
                waBtn: "–ó–∞–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ WhatsApp",
                categories: {
                    all: "–í—Å–µ —Ç–æ–≤–∞—Ä—ã",
                    nuts: "–û—Ä–µ—Ö–∏",
                    'dried-fruits': "–°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã",
                    confectionery: "–°–ª–∞–¥–æ—Å—Ç–∏",
                    other: "–î—Ä—É–≥–æ–µ"
                }
            },
            kz: {
                subtitle: "–¢“Ø—Ä–∫–∏—è –º–µ–Ω ”®–∑–±–µ–∫—Å—Ç–∞–Ω–Ω–∞–Ω –∫–µ–ª–µ—Ç—ñ–Ω –∫–µ–ø—Ç—ñ—Ä—ñ–ª–≥–µ–Ω –∂–µ–º—ñ—Å—Ç–µ—Ä –º–µ–Ω –∂–∞“£“ì–∞“õ—Ç–∞—Ä",
                orderTitle: "üì¶ –¢–∞–ø—Å—ã—Ä—ã—Å –±–µ—Ä—É",
                orderText: "–ñ–æ“ì–∞—Ä—ã —Å–∞–ø–∞–ª—ã –∂–∞“£“ì–∞“õ—Ç–∞—Ä –º–µ–Ω –∫–µ–ø—Ç—ñ—Ä—ñ–ª–≥–µ–Ω –∂–µ–º—ñ—Å—Ç–µ—Ä–≥–µ —Ç–∞–ø—Å—ã—Ä—ã—Å –±–µ—Ä—É–≥–µ –¥–∞–π—ã–Ω—Å—ã–∑ –±–∞?",
                waBtn: "WhatsApp –∞—Ä“õ—ã–ª—ã —Ç–∞–ø—Å—ã—Ä—ã—Å",
                categories: {
                    all: "–ë–∞—Ä–ª—ã“õ —Ç–∞—É–∞—Ä–ª–∞—Ä",
                    nuts: "–ñ–∞“£“ì–∞“õ—Ç–∞—Ä",
                    'dried-fruits': "–°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã",
                    confectionery: "–¢”ô—Ç—Ç—ñ–ª–µ—Ä",
                    other: "–ë–∞—Å“õ–∞–ª–∞—Ä—ã"
                }
            }
        };

        async function loadProducts() {
            try {
                const response = await fetch(GOOGLE_SHEETS_URL);
                const data = await response.json();
                allProducts = data.products || [];
                renderUI();
            } catch (e) {
                console.error(e);
            }
        }

        function changeLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-${lang}`).classList.add('active');
            renderUI();
        }

        function renderUI() {
            // –ü–µ—Ä–µ–≤–æ–¥ —Å—Ç–∞—Ç–∏–∫–∏
            document.getElementById('site-subtitle').innerText = i18n[currentLang].subtitle;
            document.getElementById('order-title').innerText = i18n[currentLang].orderTitle;
            document.getElementById('order-text').innerText = i18n[currentLang].orderText;
            document.getElementById('wa-btn').innerText = i18n[currentLang].waBtn;

            // –†–µ–Ω–¥–µ—Ä —Ñ–∏–ª—å—Ç—Ä–æ–≤
            const filterBox = document.getElementById('filter-box');
            filterBox.innerHTML = Object.keys(i18n[currentLang].categories).map(catKey => `
                <button class="filter-btn ${currentCategory === catKey ? 'active' : ''}" 
                        onclick="setFilter('${catKey}')">
                    ${i18n[currentLang].categories[catKey]}
                </button>
            `).join('');

            renderProducts();
        }

        function setFilter(cat) {
            currentCategory = cat;
            renderUI();
        }

        function renderProducts() {
            const container = document.getElementById('productsContainer');
            const categories = {
                'nuts': { title: currentLang === 'ru' ? 'üå∞ –û—Ä–µ—Ö–∏' : 'üå∞ –ñ–∞“£“ì–∞“õ—Ç–∞—Ä', products: [] },
                'dried-fruits': { title: currentLang === 'ru' ? 'üçá –°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã' : 'üçá –°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã', products: [] },
                'confectionery': { title: currentLang === 'ru' ? 'üç¨ –°–ª–∞–¥–æ—Å—Ç–∏' : 'üç¨ –¢”ô—Ç—Ç—ñ–ª–µ—Ä', products: [] },
                'other': { title: currentLang === 'ru' ? 'üõí –î—Ä—É–≥–æ–µ' : 'üõí –ë–∞—Å“õ–∞–ª–∞—Ä—ã', products: [] }
            };

            allProducts.forEach(p => {
                const cat = p.category || 'other';
                if (categories[cat]) categories[cat].products.push(p);
            });

            let html = '';
            Object.keys(categories).forEach(key => {
                const group = categories[key];
                if (group.products.length > 0 && (currentCategory === 'all' || currentCategory === key)) {
                    html += `
                        <div class="category-section">
                            <h2 class="category-title">${group.title}</h2>
                            <div class="products-grid">
                                ${group.products.map(p => createCard(p)).join('')}
                            </div>
                        </div>
                    `;
                }
            });
            container.innerHTML = html;
        }

        function createCard(p) {
            // –õ–û–ì–ò–ö–ê –ü–ï–†–ï–í–û–î–ê: –±–µ—Ä–µ–º name_kz –µ—Å–ª–∏ —è–∑—ã–∫ kz, –∏–Ω–∞—á–µ name
            const name = currentLang === 'kz' && p.name_kz ? p.name_kz : p.name;
            const desc = currentLang === 'kz' && p.description_kz ? p.description_kz : (p.description || '');
            
            let img = p.image || '';
            return `
                <div class="product-card">
                    <div class="product-image-container">
                        ${img ? `<img src="${img}" class="product-image">` : '<span>üå∞</span>'}
                    </div>
                    <div class="product-content">
                        <div class="product-name">${name}</div>
                        <div class="product-details">${desc}</div>
                        <div class="price">${p.price} ‚Ç∏</div>
                        <div style="font-size:10px; color:#ccc; text-align:center; margin-top:5px;">ID: ${p.id}</div>
                    </div>
                </div>
            `;
        }

        window.onload = loadProducts;
    </script>
</body>
</html>
